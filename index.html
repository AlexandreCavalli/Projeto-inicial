<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Orçamento APS</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    font-size: 14px;
}

.input-box {
    border: 1px solid #ccc;
    padding: 15px;
    background: #f9f9f9;
    max-width: 600px;
    margin: 0 auto 20px auto;
}

label {
    display: inline-block;
    width: 160px;
}

button {
    padding: 8px 15px;
    margin-top: 10px;
    cursor: pointer;
}

.resultado-box {
    max-width: 600px;
    margin: 0 auto;
}

table {
    width: 100%;
    border-collapse: collapse;
}

td {
    padding: 6px 4px;
}

.desc {
    width: 65%;
}

.valor {
    width: 35%;
    text-align: right;
    white-space: nowrap;
}

.linha-nf td {
    border-top: 1px dashed #999;
}

.linha-total td {
    border-top: 2px solid #b30000;
    color: #b30000;
    font-weight: bold;
    font-size: 18px;
}
</style>
</head>

<body>

<div class="input-box">
    <strong>Cálculo do orçamento</strong><br><br>

    <label>Largura (cm):</label>
    <input type="number" id="largura"><br><br>

    <label>Altura (cm):</label>
    <input type="number" id="altura"><br><br>

    <label>Modelo da tira:</label>
    <select id="tira">
        <option value="12">Perfurada 0,80</option>
        <option value="10">Perfurada 0,60</option>
        <option value="11">Lisa 0,80</option>
        <option value="9">Lisa 0,70</option>
    </select><br><br>

    <label>Kit guia:</label>
    <select id="kitTipo">
        <option value="230">Kit 100</option>
        <option value="280">Kit 130</option>
    </select>
    <input type="number" id="kitQtd" value="0"><br><br>

    <label>Com pintura epóxi:</label>
    <input type="checkbox" id="pintura"><br><br>

    <label>Centrais:</label>
    <input type="number" id="centrais" value="0"><br><br>

    <label>Mão de obra (R$):</label>
    <input type="number" id="mao" value="0"><br><br>

    <button onclick="calcular()">Calcular</button>
</div>

<div id="resultado" class="resultado-box"></div>

<script>
function moeda(valor) {
    return valor.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL"
    });
}

function calcular() {

    const largura = Number(document.getElementById("largura").value);
    const altura = Number(document.getElementById("altura").value);

    if (!largura || !altura) {
        alert("Preencha largura e altura.");
        return;
    }

    const larguraM = largura / 100;
    const area = (largura * altura) / 10000;

    const regras = [
        { ate: 10, motor: 200, preco: 800, eixo: "4,5", soleira: "30 x 50" },
        { ate: 14, motor: 300, preco: 900, eixo: "4,5", soleira: "30 x 50" },
        { ate: 20, motor: 500, preco: 1000, eixo: "5,5", soleira: "40 x 60" },
        { ate: 25, motor: 600, preco: 1150, eixo: "5,5", soleira: "40 x 60" },
        { ate: 30, motor: 800, preco: 2250, eixo: "8.0", soleira: "40 x 80" },
        { ate: 36, motor: 1000, preco: 2750, eixo: "8.0", soleira: "40 x 80" },
        { ate: 49, motor: 1500, preco: 4250, eixo: "8.0", soleira: "40 x 80" },
        { ate: 60, motor: 2000, preco: 5500, eixo: "8.0", soleira: "40 x 80" }
    ];

    const regra = regras.find(r => area <= r.ate);

    const eixoValorMetro = { "4,5": 60, "5,5": 85, "8.0": 163 };
    const soleiraValorMetro = { "30 x 50": 25, "40 x 60": 30, "40 x 80": 35 };

    const valorEixo = larguraM * eixoValorMetro[regra.eixo];
    const valorSoleira = larguraM * soleiraValorMetro[regra.soleira];

    const tiras = Math.ceil(altura / 7.5);
    const valorTiras = tiras * larguraM * Number(document.getElementById("tira").value);

    const kitQtd = Number(document.getElementById("kitQtd").value);
    const kitTipo = Number(document.getElementById("kitTipo").value);
    const valorKit = kitQtd * kitTipo;

    const pintura = document.getElementById("pintura").checked ? area * 70 : 0;
    const centrais = Number(document.getElementById("centrais").value) * 250;
    const mao = Number(document.getElementById("mao").value);
    const cobreRolo = larguraM * 200;

    const subtotal =
        regra.preco +
        valorEixo +
        valorSoleira +
        valorTiras +
        valorKit +
        cobreRolo +
        pintura +
        centrais +
        mao;

    const nf = subtotal * 0.10;
    const total = subtotal + nf;

    document.getElementById("resultado").innerHTML = `
        <table>
            <tr><td class="desc">Motor ${regra.motor} kg</td><td class="valor">${moeda(regra.preco)}</td></tr>
            <tr><td class="desc">Eixo ${regra.eixo}"</td><td class="valor">${moeda(valorEixo)}</td></tr>
            <tr><td class="desc">Soleira ${regra.soleira}</td><td class="valor">${moeda(valorSoleira)}</td></tr>
            <tr><td class="desc">Tiras (${tiras} un.)</td><td class="valor">${moeda(valorTiras)}</td></tr>
            <tr><td class="desc">Kit guia</td><td class="valor">${moeda(valorKit)}</td></tr>
            <tr><td class="desc">Cobre rolo</td><td class="valor">${moeda(cobreRolo)}</td></tr>
            <tr><td class="desc">Pintura epóxi</td><td class="valor">${moeda(pintura)}</td></tr>
            <tr><td class="desc">Centrais</td><td class="valor">${moeda(centrais)}</td></tr>
            <tr><td class="desc">Mão de obra</td><td class="valor">${moeda(mao)}</td></tr>

            <tr class="linha-nf">
                <td class="desc">Nota Fiscal (10%)</td>
                <td class="valor">${moeda(nf)}</td>
            </tr>

            <tr class="linha-total">
                <td class="desc">TOTAL</td>
                <td class="valor">${moeda(total)}</td>
            </tr>
        </table>
    `;
}
</script>

</body>
</html>
